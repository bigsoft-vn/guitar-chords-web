{"ast":null,"code":"// Global error handler for browser extension conflicts and other errors\nexport class GlobalErrorHandler{static init(){var _this=this;// Handle unhandled promise rejections\nwindow.addEventListener('unhandledrejection',event=>{console.warn('Unhandled promise rejection:',event.reason);// Prevent browser extension errors from crashing the app\nif(this.isBrowserExtensionError(event.reason)){console.info('Browser extension error detected and ignored:',event.reason);event.preventDefault();return;}// Log other errors for debugging\nthis.logError('Unhandled Promise Rejection',event.reason);});// Handle uncaught JavaScript errors\nwindow.addEventListener('error',event=>{// Ignore browser extension errors\nif(this.isBrowserExtensionError(event.error)||this.isBrowserExtensionError(event.filename)){console.info('Browser extension error detected and ignored:',event.error);event.preventDefault();return;}this.logError('Uncaught Error',event.error);});// Override console.error to filter out extension errors\nconst originalConsoleError=console.error;console.error=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}const errorString=args.join(' ');// Don't log browser extension errors\nif(_this.isBrowserExtensionError(errorString)){return;}originalConsoleError.apply(console,args);};}static isBrowserExtensionError(error){if(!error)return false;const errorString=error.toString?error.toString():String(error);// Common patterns for browser extension errors\nconst extensionPatterns=['chrome-extension://','moz-extension://','safari-extension://','ms-browser-extension://','egjidjbpglichdcondbcbdnbeeppgdph',// MetaMask extension ID\n'nkbihfbeogaeaoehlefnkodbefgpgknn',// MetaMask extension ID\n'fhbohimaelbohpjbbldcngcnapndodjp',// Binance extension ID\n'Script error.','Non-Error promise rejection captured','inpage.js','contentscript.js'];return extensionPatterns.some(pattern=>errorString.includes(pattern));}static logError(type,error){// Only log errors in development\nif(process.env.NODE_ENV==='development'){console.group(`ðŸš¨ ${type}`);console.error(error);console.groupEnd();}// In production, you might want to send to error tracking service\n// Example: Sentry, LogRocket, etc.\n}static isExtensionEnvironment(){var _chrome,_browser;return!!((_chrome=window.chrome)!==null&&_chrome!==void 0&&_chrome.runtime||(_browser=window.browser)!==null&&_browser!==void 0&&_browser.runtime||document.querySelector('script[src*=\"extension://\"]'));}}// Helper function to safely access potentially undefined objects\nexport function safeAccess(obj,path,defaultValue){try{var _path$reduce;return(_path$reduce=path.reduce((current,key)=>current===null||current===void 0?void 0:current[key],obj))!==null&&_path$reduce!==void 0?_path$reduce:defaultValue;}catch(error){console.warn(`Safe access failed for path ${path.join('.')}: ${error}`);return defaultValue;}}// Debounced error reporter to prevent spam\nexport class ErrorReporter{static report(error,context){const errorKey=error.toString();const count=this.errorCounts.get(errorKey)||0;if(count>=this.MAX_SAME_ERROR){return;// Don't report the same error too many times\n}this.errorCounts.set(errorKey,count+1);if(process.env.NODE_ENV==='development'){console.error(`[${context||'App'}] Error:`,error);}}}ErrorReporter.errorCounts=new Map();ErrorReporter.MAX_SAME_ERROR=5;","map":{"version":3,"names":["GlobalErrorHandler","init","_this","window","addEventListener","event","console","warn","reason","isBrowserExtensionError","info","preventDefault","logError","error","filename","originalConsoleError","_len","arguments","length","args","Array","_key","errorString","join","apply","toString","String","extensionPatterns","some","pattern","includes","type","process","env","NODE_ENV","group","groupEnd","isExtensionEnvironment","_chrome","_browser","chrome","runtime","browser","document","querySelector","safeAccess","obj","path","defaultValue","_path$reduce","reduce","current","key","ErrorReporter","report","context","errorKey","count","errorCounts","get","MAX_SAME_ERROR","set","Map"],"sources":["/Users/chungtran/Programming/guitar-chords/web/src/utils/errorHandler.ts"],"sourcesContent":["// Global error handler for browser extension conflicts and other errors\n\nexport class GlobalErrorHandler {\n  static init() {\n    // Handle unhandled promise rejections\n    window.addEventListener('unhandledrejection', (event) => {\n      console.warn('Unhandled promise rejection:', event.reason);\n      \n      // Prevent browser extension errors from crashing the app\n      if (this.isBrowserExtensionError(event.reason)) {\n        console.info('Browser extension error detected and ignored:', event.reason);\n        event.preventDefault();\n        return;\n      }\n      \n      // Log other errors for debugging\n      this.logError('Unhandled Promise Rejection', event.reason);\n    });\n\n    // Handle uncaught JavaScript errors\n    window.addEventListener('error', (event) => {\n      // Ignore browser extension errors\n      if (this.isBrowserExtensionError(event.error) || this.isBrowserExtensionError(event.filename)) {\n        console.info('Browser extension error detected and ignored:', event.error);\n        event.preventDefault();\n        return;\n      }\n      \n      this.logError('Uncaught Error', event.error);\n    });\n\n    // Override console.error to filter out extension errors\n    const originalConsoleError = console.error;\n    console.error = (...args: any[]) => {\n      const errorString = args.join(' ');\n      \n      // Don't log browser extension errors\n      if (this.isBrowserExtensionError(errorString)) {\n        return;\n      }\n      \n      originalConsoleError.apply(console, args);\n    };\n  }\n\n  private static isBrowserExtensionError(error: any): boolean {\n    if (!error) return false;\n    \n    const errorString = error.toString ? error.toString() : String(error);\n    \n    // Common patterns for browser extension errors\n    const extensionPatterns = [\n      'chrome-extension://',\n      'moz-extension://',\n      'safari-extension://',\n      'ms-browser-extension://',\n      'egjidjbpglichdcondbcbdnbeeppgdph', // MetaMask extension ID\n      'nkbihfbeogaeaoehlefnkodbefgpgknn', // MetaMask extension ID\n      'fhbohimaelbohpjbbldcngcnapndodjp', // Binance extension ID\n      'Script error.',\n      'Non-Error promise rejection captured',\n      'inpage.js',\n      'contentscript.js',\n    ];\n    \n    return extensionPatterns.some(pattern => \n      errorString.includes(pattern)\n    );\n  }\n\n  private static logError(type: string, error: any) {\n    // Only log errors in development\n    if (process.env.NODE_ENV === 'development') {\n      console.group(`ðŸš¨ ${type}`);\n      console.error(error);\n      console.groupEnd();\n    }\n    \n    // In production, you might want to send to error tracking service\n    // Example: Sentry, LogRocket, etc.\n  }\n\n  static isExtensionEnvironment(): boolean {\n    return !!(\n      (window as any).chrome?.runtime ||\n      (window as any).browser?.runtime ||\n      document.querySelector('script[src*=\"extension://\"]')\n    );\n  }\n}\n\n// Helper function to safely access potentially undefined objects\nexport function safeAccess<T>(obj: any, path: string[], defaultValue: T): T {\n  try {\n    return path.reduce((current, key) => current?.[key], obj) ?? defaultValue;\n  } catch (error) {\n    console.warn(`Safe access failed for path ${path.join('.')}: ${error}`);\n    return defaultValue;\n  }\n}\n\n// Debounced error reporter to prevent spam\nexport class ErrorReporter {\n  private static errorCounts = new Map<string, number>();\n  private static readonly MAX_SAME_ERROR = 5;\n\n  static report(error: Error | string, context?: string) {\n    const errorKey = error.toString();\n    const count = this.errorCounts.get(errorKey) || 0;\n    \n    if (count >= this.MAX_SAME_ERROR) {\n      return; // Don't report the same error too many times\n    }\n    \n    this.errorCounts.set(errorKey, count + 1);\n    \n    if (process.env.NODE_ENV === 'development') {\n      console.error(`[${context || 'App'}] Error:`, error);\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}