{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Container,Box,Typography,Button,Card,CardContent,List,ListItem,ListItemText,ListItemButton,CircularProgress,Alert}from'@mui/material';import{MicRounded,FavoriteRounded,HistoryRounded}from'@mui/icons-material';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MainWindow=()=>{const navigate=useNavigate();const[recentSongs,setRecentSongs]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const loadRecentSongs=async()=>{try{setLoading(true);setError(null);const songs=await apiService.getRecentSongs(3);setRecentSongs(songs||[]);}catch(err){console.error('Failed to load recent songs:',err);setError('Không thể tải danh sách bài hát gần đây');// Fallback to mock data\nsetRecentSongs([{id:1,title:'Mưa Phi Trường',artist:{id:1,name:'Hoàng Dũng'},lyrics:'',tempo:80,difficulty:'BEGINNER',playCount:0,chords:[]}]);}finally{setLoading(false);}};loadRecentSongs();},[]);const handleFamiliarSongs=()=>{if(recentSongs&&recentSongs.length>0){const randomSong=recentSongs[Math.floor(Math.random()*recentSongs.length)];if(randomSong!==null&&randomSong!==void 0&&randomSong.id){navigate(`/player/${randomSong.id}`);}}else{navigate('/search');}};const handleVoiceSearch=()=>{navigate('/search');};const handleSongSelect=songId=>{if(songId){navigate(`/player/${songId}`);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",sx:{py:4},children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",gutterBottom:true,textAlign:\"center\",fontWeight:\"bold\",children:\"Guitar Chords\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",textAlign:\"center\",children:\"\\u1EE8ng d\\u1EE5ng h\\u1ED7 tr\\u1EE3 \\u0111\\u1EC7m h\\xE1t guitar\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",gap:3,width:\"100%\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",startIcon:/*#__PURE__*/_jsx(FavoriteRounded,{}),onClick:handleFamiliarSongs,sx:{py:2,fontSize:'1.1rem'},children:\"Quen thu\\u1ED9c\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",startIcon:/*#__PURE__*/_jsx(MicRounded,{}),onClick:handleVoiceSearch,sx:{py:2,fontSize:'1.1rem'},color:\"secondary\",children:\"T\\xECm ki\\u1EBFm b\\u1EB1ng gi\\u1ECDng n\\xF3i\"})]}),/*#__PURE__*/_jsx(Card,{sx:{width:'100%',mt:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(HistoryRounded,{}),\"B\\xE0i g\\u1EA7n nh\\u1EA5t\"]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:2},children:error}),loading?/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",py:2,children:/*#__PURE__*/_jsx(CircularProgress,{size:24})}):/*#__PURE__*/_jsx(List,{disablePadding:true,children:recentSongs&&recentSongs.length>0?recentSongs.map(song=>{var _song$artist;return/*#__PURE__*/_jsx(ListItem,{disablePadding:true,children:/*#__PURE__*/_jsx(ListItemButton,{onClick:()=>handleSongSelect(song.id),children:/*#__PURE__*/_jsx(ListItemText,{primary:song.title||'Tên bài hát không có',secondary:`${((_song$artist=song.artist)===null||_song$artist===void 0?void 0:_song$artist.name)||'Nghệ sĩ không rõ'} • ${song.chords&&song.chords.length>0?song.chords.map(c=>c.name||c).join(' - '):'Chưa có hợp âm'}`})})},song.id);}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",textAlign:\"center\",py:2,children:\"Ch\\u01B0a c\\xF3 b\\xE0i h\\xE1t n\\xE0o g\\u1EA7n \\u0111\\xE2y\"})})]})})]})});};export default MainWindow;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Container","Box","Typography","Button","Card","CardContent","List","ListItem","ListItemText","ListItemButton","CircularProgress","Alert","MicRounded","FavoriteRounded","HistoryRounded","apiService","jsx","_jsx","jsxs","_jsxs","MainWindow","navigate","recentSongs","setRecentSongs","loading","setLoading","error","setError","loadRecentSongs","songs","getRecentSongs","err","console","id","title","artist","name","lyrics","tempo","difficulty","playCount","chords","handleFamiliarSongs","length","randomSong","Math","floor","random","handleVoiceSearch","handleSongSelect","songId","maxWidth","sx","py","children","display","flexDirection","alignItems","gap","variant","component","gutterBottom","textAlign","fontWeight","color","width","size","startIcon","onClick","fontSize","mt","severity","mb","justifyContent","disablePadding","map","song","_song$artist","primary","secondary","c","join"],"sources":["/Users/chungtran/Programming/guitar-chords/web/src/components/MainWindow.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemButton,\n  CircularProgress,\n  Alert,\n} from '@mui/material';\nimport {\n  MicRounded,\n  FavoriteRounded,\n  HistoryRounded,\n} from '@mui/icons-material';\nimport { apiService, Song } from '../services/api';\n\nconst MainWindow: React.FC = () => {\n  const navigate = useNavigate();\n  const [recentSongs, setRecentSongs] = useState<Song[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadRecentSongs = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        const songs = await apiService.getRecentSongs(3);\n        setRecentSongs(songs || []);\n      } catch (err) {\n        console.error('Failed to load recent songs:', err);\n        setError('Không thể tải danh sách bài hát gần đây');\n        // Fallback to mock data\n        setRecentSongs([\n          { \n            id: 1, \n            title: 'Mưa Phi Trường', \n            artist: { id: 1, name: 'Hoàng Dũng' }, \n            lyrics: '',\n            tempo: 80,\n            difficulty: 'BEGINNER',\n            playCount: 0,\n            chords: []\n          }\n        ]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadRecentSongs();\n  }, []);\n\n  const handleFamiliarSongs = () => {\n    if (recentSongs && recentSongs.length > 0) {\n      const randomSong = recentSongs[Math.floor(Math.random() * recentSongs.length)];\n      if (randomSong?.id) {\n        navigate(`/player/${randomSong.id}`);\n      }\n    } else {\n      navigate('/search');\n    }\n  };\n\n  const handleVoiceSearch = () => {\n    navigate('/search');\n  };\n\n  const handleSongSelect = (songId: number) => {\n    if (songId) {\n      navigate(`/player/${songId}`);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"sm\" sx={{ py: 4 }}>\n      <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" gap={4}>\n        <Typography variant=\"h3\" component=\"h1\" gutterBottom textAlign=\"center\" fontWeight=\"bold\">\n          Guitar Chords\n        </Typography>\n        \n        <Typography variant=\"h6\" color=\"text.secondary\" textAlign=\"center\">\n          Ứng dụng hỗ trợ đệm hát guitar\n        </Typography>\n\n        <Box display=\"flex\" flexDirection=\"column\" gap={3} width=\"100%\">\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            startIcon={<FavoriteRounded />}\n            onClick={handleFamiliarSongs}\n            sx={{ py: 2, fontSize: '1.1rem' }}\n          >\n            Quen thuộc\n          </Button>\n\n          <Button\n            variant=\"contained\"\n            size=\"large\"\n            startIcon={<MicRounded />}\n            onClick={handleVoiceSearch}\n            sx={{ py: 2, fontSize: '1.1rem' }}\n            color=\"secondary\"\n          >\n            Tìm kiếm bằng giọng nói\n          </Button>\n        </Box>\n\n        <Card sx={{ width: '100%', mt: 2 }}>\n          <CardContent>\n            <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <HistoryRounded />\n              Bài gần nhất\n            </Typography>\n            \n            {error && (\n              <Alert severity=\"warning\" sx={{ mb: 2 }}>\n                {error}\n              </Alert>\n            )}\n            \n            {loading ? (\n              <Box display=\"flex\" justifyContent=\"center\" py={2}>\n                <CircularProgress size={24} />\n              </Box>\n            ) : (\n              <List disablePadding>\n                {recentSongs && recentSongs.length > 0 ? (\n                  recentSongs.map((song) => (\n                    <ListItem key={song.id} disablePadding>\n                      <ListItemButton onClick={() => handleSongSelect(song.id)}>\n                        <ListItemText\n                          primary={song.title || 'Tên bài hát không có'}\n                          secondary={`${song.artist?.name || 'Nghệ sĩ không rõ'} • ${\n                            song.chords && song.chords.length > 0 \n                              ? song.chords.map(c => c.name || c).join(' - ')\n                              : 'Chưa có hợp âm'\n                          }`}\n                        />\n                      </ListItemButton>\n                    </ListItem>\n                  ))\n                ) : (\n                  <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\" py={2}>\n                    Chưa có bài hát nào gần đây\n                  </Typography>\n                )}\n              </List>\n            )}\n          </CardContent>\n        </Card>\n      </Box>\n    </Container>\n  );\n};\n\nexport default MainWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}